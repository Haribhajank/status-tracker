<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live Status Tracker</title>
    <style>
        body { 
            font-family: sans-serif; 
            background-color: #1e1e1e; 
            color: #d4d4d4; 
            padding: 30px; 
        }
        h1 { color: #569cd6; }
        #status-container {
            background-color: #000;
            padding: 20px;
            border-radius: 8px;
            white-space: pre-wrap; /* This keeps your Python \n formatting intact! */
            font-family: monospace;
            min-height: 400px;
            border: 1px solid #333;
            line-height: 1.5;
        }
        .update { 
            margin-bottom: 15px; 
            border-bottom: 1px dashed #444; 
            padding-bottom: 10px; 
            color: #ce9178; /* A nice string color */
        }
        .connected { color: #4CAF50; }
    </style>
</head>
<body>
    <h1>Live Status Feed ðŸ”´</h1>
    <div id="status-container"><span style="color: #888;">Connecting to server...</span>\n</div>

    <script>
        // 1. Open the WebSocket connection to your Docker container
        const ws = new WebSocket("ws://localhost:8000/ws");
        const container = document.getElementById("status-container");

        // 2. What to do when the connection opens
        ws.onopen = function() {
            container.innerHTML = "<span class='connected'>âœ” Connected to live stream! Waiting for events...</span>\n\n";
        };

        // 3. What to do when the server pushes a new update
        ws.onmessage = function(event) {
            // Create a new HTML element for the incoming text
            const newUpdate = document.createElement("div");
            newUpdate.className = "update";
            
            // event.data contains the exact formatted string from Python
            newUpdate.textContent = event.data; 
            
            // Push the newest update to the top of the feed
            container.prepend(newUpdate);
        };

        // 4. What to do if the server shuts down
        ws.onclose = function() {
            container.innerHTML += "\n<span style='color: #f44336;'>âœ– Connection to server lost.</span>";
        };
    </script>
</body>
</html>